%h1 Proposal administration
-#= link_to 'Show completed', '#', id: 'proposal-table-toggle-show', class: 'btn btn-default', data: { show_inactive: 0 }
%table#admin-table.table.table-hover.table-striped.table-responsive.admin-table
  %thead
    %tr
      %th.name Name
      %th.username Username
      %th.labgroup Labgroup
      %th.platform Platform
      %th.date Date
      %th.status Status
      - if can? :manage, @user
        %th.actions Actions
  - @proposals.each do |prop|
    - rowclass = ''
    - rowclass = 'warning' if prop.is_pending?
    - rowclass = 'info' if prop.is_complete?
    %tr(class="#{rowclass}")
      %td= prop.name
      %td= prop.user.username
      %td= prop.lab_group.name
      %td= prop.platforms.first.name
      %td= prop.updated_at.strftime("%m/%d/%Y")
      %td.proposal-status= prop.proposal_status.name
      - if can? :manage, @proposal
        %td.proposal-actions
          = link_to 'Edit', edit_proposal_path(prop), class: 'proposal-edit btn btn-default'
          -# if user.is_active?
            = link_to 'Deactivate', [user_path(user), 'status', 'I'].join('/'), class: 'user-deactivate btn btn-warning', remote: true, method: :patch
          -# elsif user.is_inactive?
            = link_to 'Reactivate', [user_path(user), 'status', 'A'].join('/'), class: 'user-approve btn btn-success', remote: true, method: :patch
          -# else
            = link_to 'Approve', [user_path(user), 'status', 'A'].join('/'), class: 'user-approve btn btn-success', remote: true, method: :patch
            = link_to 'Delete', user_path(user), data: { confirm: 'Are you sure you want to delete this user?' }, class: 'user-delete btn btn-primary', remote: true, method: :delete

