%h1 User administration
%table#users.table.table-hover.table-striped.table-responsive.admin-table
  %thead
    %tr
      %th.last-name Last name
      %th.first-name First name
      %th.org Organization
      %th.status Status
      %th.actions Actions
  - @users.each do |user|
    - rowclass = user.is_pending? ? 'warning' : ''
    %tr(class="#{rowclass}")
      %td= user.lastname
      %td= user.firstname
      %td= user.organization.name unless user.organization.nil?
      %td= user.status_name
      %td
        = link_to 'Edit', edit_user_path(user), class: 'btn btn-default'
        - if user.is_active?
          = link_to 'Deactivate', [user_path(user), 'status', 'I'].join('/'), class: 'btn btn-warning', remote: true, id: ["deactivate-", user.id].join('')
        - else
          = link_to 'Approve', [user_path(user), 'status', 'A'].join('/'), class: 'btn btn-success', remote: true, method: :patch, id: ["approve-", user.id].join('')
          = link_to 'Reject', '#', class: 'btn btn-primary', remote: true, id: ["reject-", user.id].join('')
